<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="Proxied Hangout" height="200" width="550">
    <Require feature="dynamic-height"/>
    <Require feature="rpc"/>
    <Require feature="views" />
  </ModulePrefs>
  <Content type="html"><![CDATA[
  <!DOCTYPE html>

  <style type="text/css">
  html {
      width: 100%;
      height: 100%;
      min-height: inherit;
      min-width: inherit;
  }
  body {
      width: 100%;
      height: 100%;
      min-height: inherit;
      min-width: inherit;
  }
  </style>

  <script>
    
      (function() {
        if (gapi && gapi.hangout) {

          var initHangout = function(apiInitEvent) {
            if (apiInitEvent.isApiReady) {

              url = startData = gapi.hangout.getStartData();
              gapi.onYouTubeLiveIdReady.add(function () {
                $.ajax(
                    type: "PUT",
                    url: url,
                    data: {
                        youtube_id: gapi.hangout.onair.getYouTubeLiveId()
                    }
                );
              });

              gapi.hangout.onApiReady.remove(initHangout);
            }
          };

          gapi.hangout.onApiReady.add(initHangout);
        }
      })();
      
  </script>
  <script src="https://apis.google.com/js/client.js?onload=onClientReady"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>

  ]]></Content>
</Module>	
