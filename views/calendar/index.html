{{import HTMLParser}}
{{import cgi}}
{{from gluon.serializers import json}}

{{extend 'layout.html'}}
{{block head}}
<script src="{{=URL('static', 'js/moment.min.js')}}" ></script>
<script src="{{=URL('static', 'js/fullcalendar.js')}}" ></script>
<script src="{{=URL('static', 'js/lms299calendar.js')}}"></script>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/ui-lightness/jquery-ui.css" type="text/css" media="all" />
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js" type="text/javascript"></script>
<script>
	$(document).ready(function() {
        var eventsJSON = '{{=XML(json(selectedCourseEvents))}}';
             eventsJSON = eventsJSON.replace(/start_date/g, 'start').replace(/end_date/g, 'end');
        $('#calendar').lmsCalendar({
            events: eventsJSON
        });
        {{pass}}
    });
</script>
{{end}}

<h3>Calendar</h3>
<div id="calendar"></div>
{{=selectedCourseEvents}}
{{=XML(json(selectedCourseEvents))}}
